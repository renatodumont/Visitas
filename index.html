<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VISITEC-DASM | Programa de Eventos</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: {
                            DEFAULT: '#002D5E',
                            dark: '#001D3D',
                        },
                        gold: {
                            DEFAULT: '#FFBD26', 
                        },
                        slate: {
                            50: '#F8FAFC',
                            600: '#475569',
                            800: '#1E293B',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F8FAFC;
            color: #1E293B;
            -webkit-font-smoothing: antialiased;
            font-size: 16px;
        }

        .glass-header {
            background: rgba(0, 45, 94, 0.98);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .current-time-line {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            position: relative;
        }
        .current-time-dot {
            width: 14px;
            height: 14px;
            background: #ef4444;
            border-radius: 50%;
            margin-right: 12px;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .tab-content.active {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal { transition: opacity 0.3s ease; }
        .modal-content { transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .modal.open .modal-content { transform: translateY(0); }

        .touch-target {
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .uniform-badge {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .uniform-badge:active {
            transform: scale(0.92);
            background-color: #e2e8f0;
        }
    </style>
</head>
<body class="font-sans">

    <!-- Header Fixo -->
    <header class="glass-header text-white sticky top-0 z-50 border-b border-gold shadow-xl">
        <div class="p-4 sm:p-5">
            <div class="flex justify-between items-start gap-4">
                <div class="flex-grow">
                    <p class="text-[9px] font-extrabold text-gold uppercase tracking-[0.25em] mb-1">Marinha do Brasil</p>
                    <h1 class="text-base sm:text-lg font-extrabold leading-tight">Comando do 4º Distrito Naval</h1>
                    <h2 class="text-[10px] sm:text-[11px] font-medium text-blue-100 opacity-90 mt-0.5 tracking-wide">VISITEC-DASM | Abrigo do Marinheiro</h2>
                </div>
                
                <!-- Central de Downloads -->
                <div class="flex gap-2 flex-shrink-0">
                    <a href="Programa.pdf" download="Programa.pdf" class="flex flex-col items-center group touch-target">
                        <div class="bg-white/10 w-11 h-11 flex items-center justify-center rounded-xl group-active:bg-gold/30 transition-colors border border-white/10">
                            <i class="fas fa-file-pdf text-gold"></i>
                        </div>
                        <span class="text-[8px] font-bold text-white uppercase mt-1 opacity-70">Programa</span>
                    </a>
                    <a href="Livreto (1).pdf" download="Livreto.pdf" class="flex flex-col items-center group touch-target">
                        <div class="bg-white/10 w-11 h-11 flex items-center justify-center rounded-xl group-active:bg-gold/30 transition-colors border border-white/10">
                            <i class="fas fa-book text-gold"></i>
                        </div>
                        <span class="text-[8px] font-bold text-white uppercase mt-1 opacity-70">Livreto</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Navegação Principal -->
        <nav class="grid grid-cols-5 gap-1.5 px-3 pb-3">
            <button onclick="openModal('autoridades')" class="touch-target bg-white/5 active:bg-navy-dark rounded-xl border border-white/10 transition-all flex flex-col">
                <i class="fas fa-id-badge text-gold text-sm"></i>
                <span class="text-[8px] font-bold uppercase mt-1">Autoridades</span>
            </button>
            <button onclick="openModal('comitivas')" class="touch-target bg-white/5 active:bg-navy-dark rounded-xl border border-white/10 transition-all flex flex-col">
                <i class="fas fa-hotel text-gold text-sm"></i>
                <span class="text-[8px] font-bold uppercase mt-1">Estadia</span>
            </button>
            <button onclick="openModal('uniformes')" class="touch-target bg-white/5 active:bg-navy-dark rounded-xl border border-white/10 transition-all flex flex-col">
                <i class="fas fa-tshirt text-gold text-sm"></i>
                <span class="text-[8px] font-bold uppercase mt-1">Uniformes</span>
            </button>
            <button onclick="openModal('motoristas')" class="touch-target bg-white/5 active:bg-navy-dark rounded-xl border border-white/10 transition-all flex flex-col">
                <i class="fas fa-car text-gold text-sm"></i>
                <span class="text-[8px] font-bold uppercase mt-1">Viaturas</span>
            </button>
            <button onclick="openModal('telefones')" class="touch-target bg-white/5 active:bg-navy-dark rounded-xl border border-white/10 transition-all flex flex-col">
                <i class="fas fa-phone text-gold text-sm"></i>
                <span class="text-[8px] font-bold uppercase mt-1">Contatos</span>
            </button>
        </nav>
        
        <div class="flex space-x-2 px-4 pb-4 overflow-x-auto no-scrollbar" id="tab-container"></div>
    </header>

    <!-- Cards de Eventos -->
    <main class="p-4 sm:p-5 max-w-2xl mx-auto" id="events-container"></main>

    <!-- Modal Base -->
    <div id="info-modal" class="modal fixed inset-0 z-[60] hidden">
        <div class="fixed inset-0 bg-navy-dark/90 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto flex items-end justify-center">
            <div class="modal-content bg-white w-full max-w-2xl rounded-t-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[92vh]">
                <div class="bg-navy text-white p-6 flex justify-between items-center border-b border-gold">
                    <h3 class="font-bold text-sm uppercase tracking-widest" id="modal-title">Detalhes</h3>
                    <button onclick="closeModal()" class="w-12 h-12 flex items-center justify-center rounded-full bg-white/10 active:bg-gold transition-colors">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-6 overflow-y-auto bg-slate-50 flex-grow" id="modal-body"></div>
                <div class="p-5 bg-white border-t border-slate-100">
                    <button onclick="closeModal()" class="touch-target w-full bg-slate-100 active:bg-slate-200 text-slate-800 rounded-2xl text-xs font-bold uppercase transition-all">Voltar ao Programa</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function getMapsLink(loc) {
            const l = loc.toLowerCase();
            if (l.includes("nas")) return "https://maps.app.goo.gl/3aaGjB8rjDUegxqt5";
            if (l.includes("auditório portal da amazônia")) return "https://maps.app.goo.gl/QiEJStvB5CSSvxsY6?g_st=ac";
            if (l.includes("residência funcional do cem") || l.includes("residência cem")) {
                return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent("Rua Almirante Dantas Torres, 9, Val de Cães, Belém-PA")}`;
            }
            if (l.includes("salão nobre")) {
                return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent("Comando do 4° Distrito Naval, Belém-PA")}`;
            }
            return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(loc + ", Belém-PA")}`;
        }

        // DATABASE REVISADO INTEGRALMENTE
        const schedule = [
            { label: "04 MAR", date: "2026-03-04", events: [
                { id: "e1", time: "11h35", title: "Recepção ao V Alte (RM1-FN) ROSSATTO", loc: "Aeroporto de Belém", uni: "OP3/Passeio", flight: "GOL G3 1778", desc: "Participantes: DN-02, DN-04 e DN-02.1." },
                { id: "e2", time: "12h00", title: "Recepção ao C Alte LEONARDO VIANNA", loc: "Aeroporto de Belém", uni: "OP3/Passeio", flight: "GOL G3 1158", desc: "Participantes: DN-02, DN-04 e DN-02.1." },
                { id: "e3", time: "12h15", title: "Instalação dos Almirantes", loc: "Residência CEM", uni: "OP3/Passeio", desc: "" },
                { id: "e4", time: "12h45", title: "Almoço", loc: "Residência CEM", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04 e CGS." },
                { id: "e5", time: "14h30", title: "Visita ao NAS", loc: "NAS", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04 e CGS." },
                { id: "e6", time: "15h30", title: "Visita ao Núcleo de Assistência ao Idoso (NAIM)", loc: "UMI", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, HNBe-01, DN-04 e CGS." },
                { id: "e7", time: "19h00", title: "Jantar", loc: "Restaurante Amazônia na Cuia", uni: "Esporte Amazônico", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04 e CGS." }
            ]},
            { label: "05 MAR", date: "2026-03-05", events: [
                { id: "e8", time: "07h00", title: "Café da Manhã", loc: "Residência CEM", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, DASM-01, DN-02, DN-04 e BNVC-01, 2°BtlopRib-01." },
                { id: "e9", time: "08h30", title: "Apresentação do DRAMN", loc: "Auditório Portal da Amazônia", uni: "OP3/Passeio", speaker: "CMG CLARK", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, BNVC-01, 2°BtlopRib-01 e Comitiva da AMN." },
                { id: "e10", time: "10h00", title: "Abertura da VISITEC", loc: "Auditório Portal da Amazônia", uni: "OP3/Passeio", speaker: "C Alte LEONARDO VIANNA", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte JOSÉ FABIO, Comandantes/Diretores, Imediatos/Vice-Diretores/Ajudantes, Oficiais do NAS, Oficiais dos setores de Pessoal e Assistência Social das OM, Suboficiais-Mores, Praças Auxiliares dos Departamentos de Pessoal e de Assistência Social das OM e Voluntárias Cisne-Branco." },
                { id: "e11", time: "12h00", title: "Almoço", loc: "Salão Nobre", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, C Alte JOSÉ FABIO, CMG CLARK, CMG DANIEL JÚNIOR, CMG (IM) MARRA, CMG (RM1-IM) ÁTILA LIMA, CF (FN) LUCIANO, Dr. Wagner Jansen, Sra. Iris Carvalho, Sr. Jefferson Dantas e 1T (AA) RENATO MENDES." },
                { id: "e12", time: "13h30", title: "Palestra Atividades NAS/Com4°DN", loc: "Auditório Portal da Amazônia", uni: "OP3/Passeio", speaker: "CF (T) MENDONÇA", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, Comitiva da AMN, Oficiais do NAS, Oficiais dos setores de Pessoal e Assistência Social das OM, Suboficiais-Mores, Praças Auxiliares dos Departamentos de Pessoal e de Assistência Social das OM." },
                { id: "e13", time: "14h00", title: "Palestra Atividades SAS-Saúde/HNBe", loc: "Auditório Portal da Amazônia", uni: "OP3/Passeio", speaker: "2° Ten (RM2-T) JUCIELEM AZULINO", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, Comitiva da AMN, Oficiais do NAS, Oficiais dos setores de Pessoal e Assistência Social das OM, Suboficiais-Mores das OM e Praças Auxiliares dos Departamentos de Pessoal e de Assistência Social das OM." },
                { id: "e14", time: "15h00", title: "Visita Instalações SAS-Saúde", loc: "HNBe", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, HNBe-01, DN-04 e CGS." },
                { id: "e15", time: "19h00", title: "Jantar", loc: "Casa do Saulo das Onze Janelas", uni: "Esporte Amazônico", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04 e CGS." }
            ]},
            { label: "06 MAR", date: "2026-03-06", events: [
                { id: "e16", time: "07h15", title: "Recepção no ARES Veleiro", loc: "Vila Naval Veleiro", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, BNVC-01, 2°BtlopRib-01 e Comitiva da AMN." },
                { id: "e17", time: "07h30", title: "Café da Manhã", loc: "Vila Naval Veleiro", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, BNVC-01, 2°BtlopRib-01 e Comitiva da AMN." },
                { id: "e18", time: "08h30", title: "Visita Instalações ARES/HT Veleiro", loc: "Vila Naval Veleiro", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, BNVC-01, 2°BtlopRib-01, Comitiva da AMN e Supervisor do ARES-Veleiro." },
                { id: "e19", time: "09h30", title: "Visita ao ARES-Albatroz", loc: "Vila Naval Albatroz", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, 2°BtlopRib-01, Comitiva da AMN e Supervisor do ARES-Albatroz." },
                { id: "e20", time: "10h30", title: "Visita ao ARES-Espadarte", loc: "Vila Naval Espadarte", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-04, CGS, BNVC-01, Comitiva da AMN e Supervisor do ARES-Espadarte." },
                { id: "e21", time: "12h00", title: "Almoço", loc: "Residência CEM", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-02.1, DN-04, CGS, BNVC-01 e 2°BtlopRib-01." },
                { id: "e22", time: "13h30", title: "Visita ao CIABA", loc: "CIABA", uni: "OP3/Passeio", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-02.1, DN-04 e CGS." },
                { id: "e23", time: "17h00", title: "Ida à Estação das Docas", loc: "Estação das Docas", uni: "Esporte Amazônico", desc: "Participantes: V Alte (RM1-FN) ROSSATTO, C Alte LEONARDO VIANNA, DN-02, DN-02.1, DN-04 e CGS." }
            ]},
            { label: "07 MAR", date: "2026-03-07", events: [
                { id: "e24", time: "05h00", title: "Retorno V Alte ROSSATTO", loc: "Aeroporto", uni: "OP3/Passeio", flight: "GOL G3 1728" },
                { id: "e25", time: "05h00", title: "Retorno C Alte LEONARDO VIANNA", loc: "Aeroporto", uni: "OP3/Passeio", flight: "LATAM LA 3229" }
            ]}
        ];

        const logistics = {
            vtrs: [
                { auth: "V Alte (RM1-FN) ROSSATTO", model: "TOYOTA COROLLA", plate: "RWY-6C87", mot: "2° SG-MA GOULART", tel: "21973390076" },
                { auth: "C Alte LEONARDO VIANNA", model: "TOYOTA COROLLA", plate: "SZF-4C02", mot: "1°SG-CP RAFAEL", tel: "91982393991" },
                { auth: "C Alte JOSÉ FÁBIO", model: "NISSAN SENTRA", plate: "RMY-6D47", mot: "2° SG-EL JONATHA", tel: "61991966674" },
                { auth: "COMITIVA AMN", model: "VAN EXECUTIVE", plate: "RWY-4H06", mot: "MN-RM2 PRINTES", tel: "91984586386" }
            ],
            hospedes: [
                { n: "V Alte (RM1-FN) Rossatto", f: "Presidente CD AMN", l: "Residência CEM", p: "04 a 07 MAR" },
                { n: "C Alte LEONARDO VIANNA", f: "Diretor DASM", l: "Residência CEM", p: "04 a 07 MAR" },
                { n: "CMG (RM1 IM) Átila Lima", f: "Assessor AMN", l: "Hotel Grão Pará", p: "03 a 07 MAR" },
                { n: "CC (T) Juan Felipe Alves", f: "Enc. Planejamento", l: "HT-COM4DN", p: "03 a 07 MAR" },
                { n: "CT (IM) Marcello Silva", f: "Enc. Intendência", l: "HT-COM4DN", p: "03 a 07 MAR" },
                { n: "1°Ten (T) Marcio Costa", f: "Enc. Seção de Estudos", l: "HT-COM4DN", p: "03 a 07 MAR" },
                { n: "Dr. Wagner Jansen", f: "Advogado AMN", l: "Hotel Grão Pará", p: "03 a 07 MAR" },
                { n: "Sra. Iris Carvalho", f: "Contadora AMN", l: "Hotel Grão Pará", p: "03 a 07 MAR" },
                { n: "Sr. Jefferson Dantas", f: "Administrador AMN", l: "Hotel Grão Pará", p: "03 a 07 MAR" }
            ],
            contatos: [
                { superHeader: "COM4ºDN" },
                { name: "V Alte ADRIANO MARCELINO BATISTA", role: "Comandante", phone: "91982660201" },
                { name: "C Alte JOSÉ FABIO CARNEIRO DA SILVA", role: "CEM-Com4ºDN", phone: "91982660233" },
                { name: "CT ANTONIO DE OLIVEIRA CURA JUNIOR", role: "Assistente Com4°DN", phone: "91981250005" },
                { name: "CT (AA) CARLOS GABRIEL MUNIZ FRANCO", role: "Ajudante de Ordens", phone: "91982660283" },
                { name: "1T (AA) JOSÉ RENATO MENDES DE SOUZA", role: "Assistente do CEM", phone: "91982660275" },
                { header: "OFICIAIS DE SERVIÇO" },
                { name: "OSP - Com4ºDN", role: "Telefone Funcional", phone: "91982660154" },
                { name: "OSE - Com4ºDN", role: "Telefone Funcional", phone: "91982660328" },
                { superHeader: "TITULARES DE OM" },
                { name: "CMG (MD) JAIME LOBO FIGUEIREDO", role: "HNBe", phone: "91991854662" },
                { name: "CMG (IM) LEANDRO HERMES ZUQUIM", role: "CEIMBE", phone: "91982660202" },
                { name: "CMG LEONARDO AMORIM ROVERE", role: "CIABA", phone: "91982660312" },
                { name: "CMG DANIEL JUNIOR SILVA DA COSTA", role: "BNVC", phone: "91993491643" },
                { name: "CMG GUILHERME BARROS MOREIRA", role: "COMGPTPATNAVN", phone: "91981255555" },
                { name: "CMG ALEXANDRE B. PIMENTEL", role: "CPAOR", phone: "91982660009" },
                { name: "CF (FN) LUCIANO", role: "2°BtlOpRib", phone: "91982660123" }
            ]
        };

        function init() {
            const tabs = document.getElementById('tab-container');
            const container = document.getElementById('events-container');
            schedule.forEach((day, idx) => {
                const btn = document.createElement('button');
                btn.className = `touch-target flex-1 px-4 rounded-2xl text-[10px] font-bold uppercase transition-all whitespace-nowrap ${idx === 0 ? 'bg-gold text-navy shadow-lg' : 'bg-navy-dark text-white/50'}`;
                btn.innerText = day.label;
                btn.onclick = () => switchTab(idx);
                tabs.appendChild(btn);

                const div = document.createElement('div');
                div.id = `day-${idx}`;
                div.className = `tab-content ${idx === 0 ? 'active' : ''}`;
                
                day.events.forEach(ev => {
                    const mapsUrl = getMapsLink(ev.loc);
                    div.innerHTML += `
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 relative w-full">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex items-center gap-2 text-navy">
                                    <i class="fas fa-clock text-gold text-sm"></i>
                                    <span class="text-2xl font-black tracking-tight">${ev.time}</span>
                                </div>
                                <span onclick="openModal('uniformes')" class="uniform-badge bg-slate-50 text-slate-500 text-[10px] font-bold px-3 py-1 rounded-xl uppercase border border-slate-200">
                                    ${ev.uni}
                                </span>
                            </div>
                            <h4 class="font-extrabold text-slate-800 text-[20px] leading-tight mb-5 pr-12 text-left">${ev.title}</h4>
                            <div class="flex flex-col gap-3">
                                <a href="${mapsUrl}" target="_blank" class="touch-target text-[14px] text-blue-600 font-bold inline-flex items-center gap-2.5 bg-slate-50 rounded-2xl px-4 w-fit border border-slate-100">
                                    <i class="fas fa-location-dot text-gold"></i> ${ev.loc}
                                </a>
                                ${ev.flight ? `<button onclick="searchFlight('${ev.flight}')" class="touch-target w-full bg-navy text-white text-xs font-bold rounded-2xl shadow-sm active:scale-95 transition-transform"><i class="fas fa-plane-departure text-gold mr-2"></i> RASTREAR VOO ${ev.flight}</button>` : ''}
                            </div>
                            <button onclick="showEventInfo('${ev.id}')" class="absolute top-14 right-6 text-gold p-2 active:scale-90 transition-transform"><i class="fas fa-circle-info text-3xl"></i></button>
                        </div>`;
                });
                container.appendChild(div);
            });
            updateIndicator();
            setInterval(updateIndicator, 60000);
        }

        function searchFlight(code) {
            const cleanCode = code.replace(/\s/g, '').toUpperCase();
            window.open(`https://pt.flightaware.com/live/flight/${cleanCode}`, '_blank');
        }

        window.showEventInfo = function(eventId) {
            let event = null;
            schedule.forEach(day => { const found = day.events.find(e => e.id === eventId); if(found) event = found; });
            if(!event) return;
            const modal = document.getElementById('info-modal');
            const body = document.getElementById('modal-body');
            document.getElementById('modal-title').innerText = "Programa de Eventos";
            
            let speakerBlock = "";
            if(event.speaker) {
                speakerBlock = `<div class="text-center font-bold mb-4 text-navy">Palestrante: ${event.speaker}</div><div class="w-full border-b border-slate-100 mb-4"></div>`;
            }

            body.innerHTML = `
                <div class="space-y-6">
                    <div class="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm flex items-center justify-between">
                        <div><p class="text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-widest">Hora Local</p><span class="text-navy font-black text-lg"><i class="fas fa-clock text-gold mr-2"></i>${event.time}</span></div>
                        <div class="text-right"><p class="text-[10px] font-bold text-slate-400 uppercase mb-1 tracking-widest">Uniforme</p><span onclick="openModal('uniformes')" class="uniform-badge bg-navy text-white px-4 py-1.5 rounded-xl font-bold text-[11px] uppercase border border-gold/30">${event.uni}</span></div>
                    </div>
                    <div><p class="text-[11px] font-bold text-slate-400 uppercase mb-2 tracking-widest">Atividade</p><p class="text-2xl font-extrabold text-navy leading-tight text-left">${event.title}</p></div>
                    <div class="bg-white p-6 rounded-[32px] border-l-8 border-gold shadow-sm">
                        <p class="text-[11px] font-bold text-gold uppercase mb-4 tracking-[0.2em]">Observações</p>
                        ${speakerBlock}
                        <p class="text-[15px] leading-relaxed text-slate-700 font-medium whitespace-pre-wrap text-left">${event.desc || 'Não existem observações registradas no programa para este evento.'}</p>
                    </div>
                    <a href="${getMapsLink(event.loc)}" target="_blank" class="touch-target w-full bg-navy text-white rounded-2xl text-xs font-bold uppercase gap-3 shadow-lg active:scale-95 transition-transform"><i class="fas fa-map-location-dot text-gold"></i> Visualizar Local no Maps</a>
                </div>`;
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('open'), 10);
        };

        function switchTab(idx) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(`day-${idx}`).classList.add('active');
            const btns = document.getElementById('tab-container').children;
            for(let i=0; i<btns.length; i++) {
                btns[i].className = `touch-target flex-1 px-4 rounded-2xl text-[10px] font-bold uppercase transition-all whitespace-nowrap ${i === idx ? 'bg-gold text-navy shadow-lg' : 'bg-navy-dark text-white/50'}`;
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function openModal(type) {
            const m = document.getElementById('info-modal');
            const body = document.getElementById('modal-body');
            let content = "";
            
            if (type === 'uniformes') {
                document.getElementById('modal-title').innerText = "Manual de Uniformes";
                const unis = [{ t: "OP3", img: "op3-branco.png", d: "Uniforme Operativo Azul-Ferrete." }, { t: "Passeio", img: "Passeio.png", d: "Calça, camisa social (sem gravata), blazer." }, { t: "Esporte Amazônico", img: "Esporte-Amazonico.png", d: "Calça, camisa polo, sapato clássico." }];
                unis.forEach(u => content += `<div class="bg-white p-5 rounded-[32px] border border-slate-100 mb-5 shadow-sm"><p class="font-extrabold text-navy mb-4 text-xs uppercase border-b pb-2 tracking-widest">${u.t}</p><img src="${u.img}" class="w-full h-80 object-contain bg-slate-50 rounded-3xl mb-4 p-2 shadow-inner"><p class="text-[15px] text-slate-600 font-medium text-left">${u.d}</p></div>`);
            } else if (type === 'telefones') {
                document.getElementById('modal-title').innerText = "Diretório de Contatos";
                content = `<div class="bg-white rounded-[32px] border border-slate-100 overflow-hidden shadow-sm">`;
                logistics.contatos.forEach(t => {
                    if (t.superHeader) content += `<div class="bg-navy p-5 text-gold text-center font-extrabold text-xs uppercase tracking-[0.3em]">${t.superHeader}</div>`;
                    else if (t.header) content += `<div class="bg-slate-50 p-2 pl-6 text-navy font-bold text-[10px] uppercase border-y tracking-wider">${t.header}</div>`;
                    else content += `<div class="p-5 border-b border-slate-50 flex justify-between items-center bg-white active:bg-slate-100 transition-colors"><div class="flex-grow pr-4"><p class="font-bold text-[16px] text-slate-800 uppercase leading-tight">${t.name}</p><p class="text-[10px] text-slate-400 font-bold uppercase mt-1 leading-none">${t.role}</p></div><div class="flex gap-2"><a href="tel:${t.phone.replace(/\D/g,'')}" class="touch-target bg-slate-100 text-navy p-4 rounded-full w-14 h-14 shadow-sm border border-slate-200"><i class="fas fa-phone-alt"></i></a><a href="https://wa.me/55${t.phone.replace(/\D/g,'')}" target="_blank" class="touch-target bg-emerald-500 text-white p-4 rounded-full w-14 h-14 shadow-md"><i class="fab fa-whatsapp"></i></a></div></div>`;
                });
                content += "</div>";
            } else if (type === 'comitivas') {
                document.getElementById('modal-title').innerText = "Hóspedes e Estadia";
                logistics.hospedes.forEach(h => content += `<div class="bg-white p-6 rounded-[24px] border border-slate-100 mb-4 shadow-sm flex justify-between items-center group active:scale-[0.98] transition-transform"><div><p class="font-bold text-navy text-base uppercase leading-tight">${h.n}</p><p class="text-[11px] text-slate-400 font-bold uppercase mt-1 tracking-tighter leading-tight">${h.f}</p><div class="mt-4 flex items-center gap-2 text-[12px] font-bold uppercase text-gold"><i class="fas fa-hotel"></i> ${h.l}</div></div><span class="bg-navy text-gold text-[10px] font-black px-2 py-4 rounded-xl uppercase tracking-widest [writing-mode:vertical-lr] border border-gold/30">${h.p}</span></div>`);
            } else if (type === 'motoristas' || type === 'autoridades') {
                document.getElementById('modal-title').innerText = "Logística de Viaturas";
                logistics.vtrs.forEach(v => {
                    const label = v.auth.toUpperCase().includes("COMITIVA") ? "Apoio à" : "Apoio ao";
                    content += `
                        <div class="bg-white p-6 rounded-[32px] border border-slate-100 mb-5 shadow-sm border-l-[10px] border-gold">
                            <p class="text-[10px] font-extrabold text-navy/40 uppercase tracking-widest mb-1 tracking-tighter">${label}</p>
                            <p class="text-base font-extrabold text-navy uppercase mb-5">${v.auth}</p>
                            <div class="bg-slate-50 p-5 rounded-[24px] mb-6 border border-slate-100">
                                <p class="text-[10px] font-bold text-slate-400 uppercase mb-2">Motorista Responsável</p>
                                <p class="text-lg font-bold text-slate-800 uppercase underline decoration-gold/50 underline-offset-8">${v.mot}</p>
                                <div class="mt-4">
                                    <p class="text-[13px] text-navy font-bold flex items-center gap-3"><i class="fas fa-car-side"></i> ${v.model}</p>
                                    <p class="text-[13px] text-navy font-bold mt-1 pl-6.5 uppercase">Placa: ${v.plate}</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <a href="tel:${v.tel.replace(/\D/g,'')}" class="touch-target flex-1 bg-navy text-white text-xs font-bold rounded-2xl border border-gold/20 shadow-sm"><i class="fas fa-phone-alt mr-2 text-gold"></i> Chamar</a>
                                <a href="https://wa.me/55${v.tel.replace(/\D/g,'')}" target="_blank" class="touch-target flex-1 bg-emerald-600 text-white text-xs font-bold rounded-2xl shadow-md"><i class="fab fa-whatsapp mr-2 text-gold"></i> WhatsApp</a>
                            </div>
                        </div>`;
                });
            }
            body.innerHTML = content;
            m.classList.remove('hidden');
            setTimeout(() => m.classList.add('open'), 10);
        }

        function closeModal() { const m = document.getElementById('info-modal'); m.classList.remove('open'); setTimeout(() => m.classList.add('hidden'), 300); }

        function updateIndicator() {
            document.querySelectorAll('.current-time-line').forEach(l => l.remove());
            const active = document.querySelector('.tab-content.active');
            if(!active) return;
            const now = new Date();
            const timeVal = now.getHours() * 60 + now.getMinutes();
            let added = false;
            active.querySelectorAll('.bg-white').forEach(card => {
                const timeEl = card.querySelector('.text-2xl');
                if(!timeEl) return;
                const match = timeEl.innerText.match(/(\d+)h(\d*)/);
                if(!match) return;
                const h = parseInt(match[1]), m = parseInt(match[2] || 0);
                if(!added && timeVal < (h*60 + m)) {
                    card.insertAdjacentHTML('beforebegin', `<div class="current-time-line"><div class="current-time-dot"></div><span class="current-time-label uppercase tracking-tighter">AGORA (${now.getHours()}h${String(now.getMinutes()).padStart(2,'0')})</span></div>`);
                    added = true;
                }
            });
        }
        window.onload = init;
    </script>
</body>
</html>

